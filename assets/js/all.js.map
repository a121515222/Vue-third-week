{"version":3,"sources":["all.js"],"names":["myModal","app","Vue","createApp","data","isNew","postId","user","apiInfo","url","path","products","productTemp","inputProduct","title","category","origin_price","price","unit","description","content","is_enabled","imageUrl","imagesUrl","methods","openModal","show","Object","keys","forEach","item","i","id","console","log","closeModal","hide","resetModal","showProduct","activeProduct","e","index","target","dataset","login","username","password","axios","post","then","res","document","cookie","token","Date","expired","location","href","err","alert","response","message","sendToken","myToken","replace","defaults","headers","common","getProduct","pathname","get","inputPlaceholder","porductStatus","result","sendDataPrepare","sendData","JSON","parse","stringify","editPorductList","put","deleteProduct","confrim","prompt","addImg","push","deleteImg","pop","computed","watch","mounted","bootstrap","Modal","querySelector","mount"],"mappings":"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","file":"all.js","sourcesContent":["let myModal=\"\";\n\nconst app = Vue.createApp({\n  data() {\n    return {\n      isNew: true,\n      postId:\"\",\n      user: {\n        \"username\": \"\",\n        \"password\": \"\"\n      }, apiInfo: {\n        url: 'https://vue3-course-api.hexschool.io/v2',\n        path: 'chun-chia'\n      }, products: [],\n      productTemp: {},\n      inputProduct: {\n        title: \"\",\n        category: \"\",\n        origin_price: null,\n        price: null,\n        unit: \"\",\n        description: \"\",\n        content: \"\",\n        is_enabled:\"\",\n        imageUrl: \"\",\n        imagesUrl:[],\n      },\n    }\n  },\n  methods: {\n    openModal(data) {\n      myModal.show();\n      //把id寫入postId\n      //把products的資料取出傳到inputProudct\n      if (this.isNew === false) {\n        Object.keys(data).forEach((item)=>{\n          Object.keys(this.inputProduct).forEach((i)=>{\n            if(item===i){\n              this.inputProduct[i]=data[item]\n            };\n          });\n        });\n        this.postId=data.id\n        console.log(this.products)\n      } else {\n        return\n       };\n      \n    },\n    closeModal() {\n      myModal.hide();\n      //每次關閉都會重製inputProduct\n      this.resetModal();\n    },\n    showProduct(data) {\n      this.productTemp = data\n      // if (e.target.nodeName === 'BUTTON') {\n      //   const index = e.target.dataset.index;\n      //   this.productTemp = this.products[index];\n\n      // }\n      // else { return }\n    },\n    activeProduct(e) {\n      const index = e.target.dataset.index;\n      if (this.products[index].is_enabled === 0) {\n        this.products[index].is_enabled = 1;\n      } else {\n        this.products[index].is_enabled = 0;\n      }\n      //console.log(this.products[index].is_enabled)\n    },\n    login() {\n      console.log(this.user);\n      if (this.user.username !== '' && this.user.password !== '') {\n        axios.post(`${this.apiInfo.url}/admin/signin`, this.user).then((res) => {\n          //console.log(res.data)\n          //把token存到cookie\n          document.cookie = `myHextoken=${res.data.token}; expires=${new Date(res.data.expired)}`;\n          //轉跳頁面到產品資料頁\n          //或是用window.location=\"Vue first week-2.html\"\n          location.href = \"./Admin produlist.html\"\n        }).catch((err) => {\n          \n          alert(err.response.data.message)\n        })\n      } else { alert(\"請輸入帳號與密碼\") }\n    },\n    sendToken() {\n      const myToken = document.cookie.replace(/(?:(?:^|.*;\\s*)myHextoken\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\n      axios.defaults.headers.common['Authorization'] = myToken;\n      \n    },\n\n    getProduct() {\n      //console.log(location.pathname)\n      //判斷目前頁面是否為\"/Vue first week-2.html\"可以先用console.log(location.pathname)確認\n      //傳到git hub上面時要去看git hub上面的location.pathname，在網頁的console 輸入location.pathname\n      if (location.pathname === '/Admin%20produlist.html') {\n        //取得所存在cookie的token\n        this.sendToken();\n        axios.get(`${this.apiInfo.url}/api/${this.apiInfo.path}/admin/products`).then((res) => {\n          this.products = res.data.products;\n          //console.log(this.products)\n          //console.log(res.data)\n        }).catch((err) => {\n          alert(`${err.response.data.message},自動轉跳至登入頁`)\n          if(err.response.data.message==='驗證錯誤, 請重新登入'){\n            location.href = \"./index.html\"\n          }\n        });\n      }\n    },\n    inputPlaceholder(data) {\n      return `請輸入${data}`\n    },\n    porductStatus(data) {\n      let result = null;\n      switch (data) {\n        case 0: result = \"未上架\"\n          break;\n        case 1: result = \"已上架\"\n          break;\n        case 2: result = \"缺貨中\"\n          break;\n        case 3: result = \"補貨中\"\n          break;\n        case 4: result = \"促銷中\"\n          break;\n        case 5: result = \"待下架\"\n          break;\n      };\n      return result;\n    },\n    sendDataPrepare(){\n      const sendData = {\n        data:\n        {\n          title: \"\",\n          category: \"\",\n          origin_price: null,\n          price: null,\n          unit: \"\",\n          description: \"\",\n          content: \"\",\n          is_enabled: null,\n          imageUrl: \"\",\n          imagesUrl: []\n        }\n      };\n      // this.inputProduct.is_enabled=parseInt(this.inputProduct.is_enabled);\n      sendData.data=JSON.parse(JSON.stringify(this.inputProduct));\n      return sendData;\n    },\n    resetModal(){\n      this.inputProduct = {\n        title: \"\",\n        category: \"\",\n        origin_price: null,\n        price: null,\n        unit: \"\",\n        description: \"\",\n        content: \"\",\n        is_enabled: \"\",\n        imageUrl: \"\",\n        imagesUrl: []\n      };\n    },\n    editPorductList() {\n      //新增商品\n      if (this.isNew === true) {\n       const sendData = this.sendDataPrepare();\n        this.sendToken();\n        axios.post(`${this.apiInfo.url}/api/${this.apiInfo.path}/admin/product`, sendData).then((res) => {\n          alert(res.data.message);\n          this.getProduct();\n          this.resetModal();\n        }).catch((err) => {\n          alert(err.response.data.message);\n          console.log(err.response);\n        });\n      }\n      //編輯商品\n      else if (this.isNew === false) {\n        const sendData = this.sendDataPrepare();\n        this.sendToken();\n        axios.put(`${this.apiInfo.url}/api/${this.apiInfo.path}/admin/product/${this.postId}`, sendData).then((res) => {\n          alert(res.data.message);\n          this.getProduct();\n          this.closeModal();\n          //清空postId\n          this.postId=\"\";\n          \n          \n        }).catch((err) => {\n          alert(err.response.data.message);\n          console.log(err.response);\n        });\n      }\n    },\n    deleteProduct(){\n      console.log(this.postId)\n      const confrim = prompt(\"請輸入delete\")\n      if(confrim==='delete'){\n        axios.delete(`${this.apiInfo.url}/api/${this.apiInfo.path}/admin/product/${this.postId}`).then((res) => {\n          alert(res.data.message);\n          this.getProduct();\n        }).catch((err) => {\n          alert(err.response.data.message);\n          console.log(err.response);\n        });\n      }else{\n        alert('輸入錯誤，不進行刪除')\n      }\n    },\n    addImg(){\n      this.inputProduct.imagesUrl.push('');\n    },\n    deleteImg(){\n      this.inputProduct.imagesUrl.pop();\n    }\n  },\n  computed: {\n  },\n  watch: {\n  },\n  mounted() {\n    myModal = new bootstrap.Modal(document.querySelector('#modalInputData'));\n    this.getProduct();\n  },\n})\napp.mount(\"#app\")\n\n"]}